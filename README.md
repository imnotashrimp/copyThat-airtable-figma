# Airtable CopySync for Figma

UX writers rejoice!
Now you can sync strings from Airtable to your Figma designs.

## Setting up Airtable

First things first.
You'll need to have an Airtable base to grab the copy from.

Your base needs these two fields:

* key field (a unique ID)
* copy field (the string to sync)

You can name the key and copy fields whatever you want.
You'll provide the field names in the plugin configuration.

### The key field

The key field needs to be unique for each record.

Some easy ways you can make this happen:

* **Recommended**: A formula that uses `RECORD_ID()` (automatically generated by Airtable).
* Use the DeDupe block (if you're on Pro or higher).
  It's not automatic, but it'll flag duplicates.
* Use the _Autonumber_ field type.

<table><td>
<strong>Important</strong>:
If there are duplicates in the key field,
all matching results will be returned,
and the plugin will use whichever it comes across first.
As of v1, the plugin won't catch this as an error.
</td></table>

## Install

In the Figma desktop app menu,
select **Plugins > Manage Plugins...**,
and then click **Browse all plugins**.

Find _Airtable CopySync_ and install it.

## Configure

In the Figma menu, select **Plugins > Airtable CopySync > Configure...**,
and give over this information.

| Field | Where can I find it? |
|---|---|
| Airtable API key | Go to the [Account overview page](https://airtable.com/account), and click **Generate API key**. |
| Base ID | Go to [https://airtable.com/api](https://airtable.com/api), then click the base you want to sync. You'll see it in the URL as `https://airtable.com/{BASE_ID}/...` |
| Table | You assign this name in the base. Go to your base, and copy the tab name. |
| Primary key field | You assign this in the base. |
| Field with the copy | You assign this in the base. |

<table><td>
<strong>Note</strong>:
As of v1, this configuration is stored with each design.
I plan to have a way to sync this information between designs in a future release.
</td></table>

### Security and your API key

As of v1 of this plugin,
the API key has the same permissions as the user who created it.
Airtable does not have a way to scope API key permissions.
This means if you're a Base owner, your API key can add, remove, and delete records and fields.

Obviously, this isn't good security.

A secure workaround:
**Make a dedicated read-only user for this plugin,**
**and use that API key.**

## Make variables in your design

Airtable CopySync will synchronize all text fields
that contain a double set of curly braces.

When the plugin runs,
it compares the `{{key}}` found in the node name
to keys in your Airtable base.

If it can't find a matching key in your base,
you'll see
`!! This string isn't in the database`
in the node so you can troubleshoot.

The key needs to be an exact match between the node title
and your Airtable base.

### Keeping text node names valid

Text nodes with these names will be synced:

* `{{this will be synced}}`
* `My own description {{and then variable name}}`

Careful, though:
Make sure the node name has one set of braces only.

These might give you the wrong results:

* `{{two sets}} {{of braces}}` will sync with the key `two sets`
* `{{a set of {{nested}} braces}}` will sync with the key `a set of {{nested`

## Sync

In the Figma menu, select **Plugins > Airtable CopySync > Sync all copy**.

<table><td>
<strong>Important</strong>:
Airtable CopySync updates all text nodes with variable names,
everywhere in the design.
Always double-check the results,
and undo the sync if something went wrong.
</td></table>

## Contributions

Version 1 of the plugin is largely my own use case,
with some flexibility so that others can use it.

If you have feature requests or notes on your use case,
feel free to [join the discussion on an issue](https://github.com/imnotashrimp/figma-plugin-airtable-cms/issues/)
or open a new issue.

Pull requests are also welcome,
whether they're new or improved functionality,
optimized code,
or better documentation.

### Running locally

Figma recommends writing plugins in TypeScript.
I found it easy enough to learn.

If you're not familiar with TypeScript,
you can learn about it at https://www.typescriptlang.org/.

#### To develop & run the plugin

I'm on macOS.
These instructions should also work for Linux
(but I haven't tested yet).
If you're on Windows, please feel free to add separate instructions.

**Before you begin, you'll need**:
[Visual Studio Code](https://code.visualstudio.com/download),
[npm](https://www.npmjs.com/get-npm),
Figma Desktop (this won't work in your browser)

##### 1. Open this repo in Visual Studio Code

```shell
git clone https://github.com/imnotashrimp/figma-plugin-airtable-cms.git
code figma-plugin-airtable-cms
```

##### 2. Install TypeScript & other dependencies

In Visual Studio Code, open the terminal
(in the menu, **Terminal > New Terminal**).

Run these commands:

```shell
sudo npm install -g TypeScript
npm install
```

##### 3. Run the plugin

In the menu, run **Terminal > Run Task...**,
then select **webpack: run locally**.

Keep the plugin running in the background
so you can develop & test in Figma.

##### 4. Load the plugin in Figma

Open Figma Desktop.
In the menu, select **Plugins > Development > New Plugin...**.
Click the button under **Link existing plugin**, and select `manifest.json` from this project.

After that, you can use the plugin under the **Plugins > Development** menu.

## Roadmap

Find the v1 release roadmap [here](https://github.com/imnotashrimp/figma-plugin-airtable-cms/milestone/1).
